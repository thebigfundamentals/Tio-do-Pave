/*! For license information please see nedb.min.js.LICENSE.txt */
(()=>{var e={159:e=>{e.exports.uid=e=>(e=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=e.length%3;let n,i="";for(let a=0,s=e.length-r;a<s;a+=3)n=(e[a]<<16)+(e[a+1]<<8)+e[a+2],i+=t[(o=n)>>18&63]+t[o>>12&63]+t[o>>6&63]+t[63&o];var o;return 1===r?(n=e[e.length-1],i+=t[n>>2],i+=t[n<<4&63],i+="=="):2===r&&(n=(e[e.length-2]<<8)+e[e.length-1],i+=t[n>>10],i+=t[n>>4&63],i+=t[n<<2&63],i+="="),i})((e=>{const t=new Array(e);for(let r,n=0;n<e;n++)0==(3&n)&&(r=4294967296*Math.random()),t[n]=r>>>((3&n)<<3)&255;return t})(Math.ceil(Math.max(8,2*e)))).replace(/[+/]/g,"").slice(0,e)},302:(e,t,r)=>{const n=r(483).createInstance({name:"NeDB",storeName:"nedbdata"}),i=(e,t,r,i)=>{"function"==typeof r&&(i=r),n.setItem(e,t,(()=>i()))};e.exports.exists=(e,t)=>{n.getItem(e,((e,r)=>t(null!==r)))},e.exports.rename=(e,t,r)=>{n.getItem(e,((i,o)=>{null===o?n.removeItem(t,(()=>r())):n.setItem(t,o,(()=>{n.removeItem(e,(()=>r()))}))}))},e.exports.writeFile=i,e.exports.crashSafeWriteFile=i,e.exports.appendFile=(e,t,r,i)=>{"function"==typeof r&&(i=r),n.getItem(e,((r,o)=>{o=o||"",o+=t,n.setItem(e,o,(()=>i()))}))},e.exports.readFile=(e,t,r)=>{"function"==typeof t&&(r=t),n.getItem(e,((e,t)=>r(null,t||"")))},e.exports.unlink=(e,t)=>{n.removeItem(e,(()=>t()))},e.exports.mkdir=(e,t,r)=>r(),e.exports.ensureDatafileIntegrity=(e,t)=>t(null)},578:(e,t,r)=>{const n=r(118);e.exports=class{constructor(e,t,r){this.db=e,this.query=t||{},r&&(this.execFn=r)}limit(e){return this._limit=e,this}skip(e){return this._skip=e,this}sort(e){return this._sort=e,this}projection(e){return this._projection=e,this}project(e){const t=[];let r;if(void 0===this._projection||0===Object.keys(this._projection).length)return e;const i=0!==this._projection._id,{_id:o,...a}=this._projection;this._projection=a;const s=Object.keys(this._projection);return s.forEach((e=>{if(void 0!==r&&this._projection[e]!==r)throw new Error("Can't both keep and omit fields except for _id");r=this._projection[e]})),e.forEach((e=>{let o;1===r?(o={$set:{}},s.forEach((t=>{o.$set[t]=n.getDotValue(e,t),void 0===o.$set[t]&&delete o.$set[t]})),o=n.modify({},o)):(o={$unset:{}},s.forEach((e=>{o.$unset[e]=!0})),o=n.modify(e,o)),i?o._id=e._id:delete o._id,t.push(o)})),t}_exec(e){let t,r,i=[],o=0,a=0,s=null;const c=(t,r)=>this.execFn?this.execFn(t,r,e):e(t,r);this.db.getCandidates(this.query,((e,u)=>{if(e)return c(e);try{for(const e of u)if(n.match(e,this.query))if(this._sort)i.push(e);else if(this._skip&&this._skip>a)a+=1;else if(i.push(e),o+=1,this._limit&&this._limit<=o)break}catch(e){return c(e)}if(this._sort){t=Object.keys(this._sort);const e=[];t.forEach((t=>{r=t,e.push({key:r,direction:this._sort[r]})})),i.sort(((t,r)=>{for(const i of e){const e=i.direction*n.compareThings(n.getDotValue(t,i.key),n.getDotValue(r,i.key),this.db.compareStrings);if(0!==e)return e}return 0}));const o=this._limit||i.length,a=this._skip||0;i=i.slice(a,a+o)}try{i=this.project(i)}catch(e){s=e,i=void 0}return c(s,i)}))}exec(){this.db.executor.push({this:this,fn:this._exec,arguments})}}},797:(e,t,r)=>{const{EventEmitter:n}=r(187),i=r(223),o=r(578),a=r(159),s=r(196),c=r(98),u=r(118),l=r(328),{isDate:f}=r(988);e.exports=class extends n{constructor(e){let t;super(),"string"==typeof e?(t=e,this.inMemoryOnly=!1):(t=(e=e||{}).filename,this.inMemoryOnly=e.inMemoryOnly||!1,this.autoload=e.autoload||!1,this.timestampData=e.timestampData||!1),t&&"string"==typeof t&&0!==t.length?this.filename=t:(this.filename=null,this.inMemoryOnly=!0),this.compareStrings=e.compareStrings,this.persistence=new l({db:this,nodeWebkitAppName:e.nodeWebkitAppName,afterSerialization:e.afterSerialization,beforeDeserialization:e.beforeDeserialization,corruptAlertThreshold:e.corruptAlertThreshold}),this.executor=new s,this.inMemoryOnly&&(this.executor.ready=!0),this.indexes={},this.indexes._id=new c({fieldName:"_id",unique:!0}),this.ttlIndexes={},this.autoload&&this.loadDatabase(e.onload||(e=>{if(e)throw e}))}loadDatabase(){this.executor.push({this:this.persistence,fn:this.persistence.loadDatabase,arguments},!0)}getAllData(){return this.indexes._id.getAll()}resetIndexes(e){for(const t of Object.values(this.indexes))t.reset(e)}ensureIndex(e={},t=(()=>{})){if(!e.fieldName){const e=new Error("Cannot create an index without a fieldName");return e.missingFieldName=!0,t(e)}if(this.indexes[e.fieldName])return t(null);this.indexes[e.fieldName]=new c(e),void 0!==e.expireAfterSeconds&&(this.ttlIndexes[e.fieldName]=e.expireAfterSeconds);try{this.indexes[e.fieldName].insert(this.getAllData())}catch(r){return delete this.indexes[e.fieldName],t(r)}this.persistence.persistNewState([{$$indexCreated:e}],(e=>t(e||null)))}removeIndex(e,t=(()=>{})){delete this.indexes[e],this.persistence.persistNewState([{$$indexRemoved:e}],(e=>t(e||null)))}addToIndexes(e){let t,r;const n=Object.keys(this.indexes);for(let i=0;i<n.length;i+=1)try{this.indexes[n[i]].insert(e)}catch(e){t=i,r=e;break}if(r){for(let r=0;r<t;r+=1)this.indexes[n[r]].remove(e);throw r}}removeFromIndexes(e){for(const t of Object.values(this.indexes))t.remove(e)}updateIndexes(e,t){let r,n;const i=Object.keys(this.indexes);for(let o=0;o<i.length;o+=1)try{this.indexes[i[o]].update(e,t)}catch(e){r=o,n=e;break}if(n){for(let n=0;n<r;n+=1)this.indexes[i[n]].revertUpdate(e,t);throw n}}getCandidates(e,t,r){const n=Object.keys(this.indexes);let o;"function"==typeof t&&(r=t,t=!1),i.waterfall([t=>(o=[],Object.keys(e).forEach((t=>{("string"==typeof e[t]||"number"==typeof e[t]||"boolean"==typeof e[t]||f(e[t])||null===e[t])&&o.push(t)})),o=o.filter((e=>n.includes(e))),o.length>0?t(null,this.indexes[o[0]].getMatching(e[o[0]])):(o=[],Object.keys(e).forEach((t=>{e[t]&&Object.prototype.hasOwnProperty.call(e[t],"$in")&&o.push(t)})),o=o.filter((e=>n.includes(e))),o.length>0?t(null,this.indexes[o[0]].getMatching(e[o[0]].$in)):(o=[],Object.keys(e).forEach((t=>{e[t]&&(Object.prototype.hasOwnProperty.call(e[t],"$lt")||Object.prototype.hasOwnProperty.call(e[t],"$lte")||Object.prototype.hasOwnProperty.call(e[t],"$gt")||Object.prototype.hasOwnProperty.call(e[t],"$gte"))&&o.push(t)})),o=o.filter((e=>n.includes(e))),o.length>0?t(null,this.indexes[o[0]].getBetweenBounds(e[o[0]])):t(null,this.getAllData())))),e=>{if(t)return r(null,e);const n=[],o=[],a=Object.keys(this.ttlIndexes);e.forEach((e=>{let t=!0;a.forEach((r=>{void 0!==e[r]&&f(e[r])&&Date.now()>e[r].getTime()+1e3*this.ttlIndexes[r]&&(t=!1)})),t?o.push(e):n.push(e._id)})),i.eachSeries(n,((e,t)=>{this._remove({_id:e},{},(e=>e?r(e):t()))}),(e=>r(null,o)))}])}_insert(e,t=(()=>{})){let r;try{r=this.prepareDocumentForInsertion(e),this._insertInCache(r)}catch(e){return t(e)}this.persistence.persistNewState(Array.isArray(r)?r:[r],(e=>e?t(e):t(null,u.deepCopy(r))))}createNewId(){let e=a.uid(16);return this.indexes._id.getMatching(e).length>0&&(e=this.createNewId()),e}prepareDocumentForInsertion(e){let t;if(Array.isArray(e))t=[],e.forEach((e=>{t.push(this.prepareDocumentForInsertion(e))}));else{t=u.deepCopy(e),void 0===t._id&&(t._id=this.createNewId());const r=new Date;this.timestampData&&void 0===t.createdAt&&(t.createdAt=r),this.timestampData&&void 0===t.updatedAt&&(t.updatedAt=r),u.checkObject(t)}return t}_insertInCache(e){Array.isArray(e)?this._insertMultipleDocsInCache(e):this.addToIndexes(e)}_insertMultipleDocsInCache(e){let t,r;for(let n=0;n<e.length;n+=1)try{this.addToIndexes(e[n])}catch(e){r=e,t=n;break}if(r){for(let r=0;r<t;r+=1)this.removeFromIndexes(e[r]);throw r}}insert(){this.executor.push({this:this,fn:this._insert,arguments})}count(e,t){const r=new o(this,e,(function(e,t,r){return e?r(e):r(null,t.length)}));if("function"!=typeof t)return r;r.exec(t)}find(e,t,r){1===arguments.length?t={}:2===arguments.length&&"function"==typeof t&&(r=t,t={});const n=new o(this,e,(function(e,t,r){return e?r(e):r(null,t.map((e=>u.deepCopy(e))))}));if(n.projection(t),"function"!=typeof r)return n;n.exec(r)}findOne(e,t,r){1===arguments.length?t={}:2===arguments.length&&"function"==typeof t&&(r=t,t={});const n=new o(this,e,((e,t,r)=>e?r(e):1===t.length?r(null,u.deepCopy(t[0])):r(null,null)));if(n.projection(t).limit(1),"function"!=typeof r)return n;n.exec(r)}_update(e,t,r,n){"function"==typeof r&&(n=r,r={});const a=n||(()=>{}),s=void 0!==r.multi&&r.multi,c=void 0!==r.upsert&&r.upsert;i.waterfall([r=>{if(!c)return r();new o(this,e).limit(1)._exec(((n,i)=>{if(n)return a(n);if(1===i.length)return r();{let r;try{u.checkObject(t),r=t}catch(i){try{r=u.modify(u.deepCopy(e,!0),t)}catch(n){return a(n)}}return this._insert(r,((e,t)=>e?a(e):a(null,1,t,!0)))}}))},()=>{let n,i=0;const o=[];let c;this.getCandidates(e,((l,f)=>{if(l)return a(l);try{for(const r of f)u.match(r,e)&&(s||0===i)&&(i+=1,this.timestampData&&(c=r.createdAt),n=u.modify(r,t),this.timestampData&&(n.createdAt=c,n.updatedAt=new Date),o.push({oldDoc:r,newDoc:n}))}catch(l){return a(l)}try{this.updateIndexes(o)}catch(l){return a(l)}const h=o.map((e=>e.newDoc));this.persistence.persistNewState(h,(e=>{if(e)return a(e);if(r.returnUpdatedDocs){let e=[];return h.forEach((t=>{e.push(u.deepCopy(t))})),s||(e=e[0]),a(null,i,e)}return a(null,i)}))}))}])}update(){this.executor.push({this:this,fn:this._update,arguments})}_remove(e,t,r){"function"==typeof t&&(r=t,t={});const n=r||(()=>{}),i=void 0!==t.multi&&t.multi;this.getCandidates(e,!0,((t,r)=>{if(t)return n(t);const o=[];let a=0;try{r.forEach((t=>{u.match(t,e)&&(i||0===a)&&(a+=1,o.push({$$deleted:!0,_id:t._id}),this.removeFromIndexes(t))}))}catch(t){return n(t)}this.persistence.persistNewState(o,(e=>e?n(e):n(null,a)))}))}remove(){this.executor.push({this:this,fn:this._remove,arguments})}}},196:(e,t,r)=>{var n=r(475).setImmediate,i=r(155);const o=r(223);e.exports=class{constructor(){this.buffer=[],this.ready=!1,this.queue=o.queue(((e,t)=>{const r=Array.from(e.arguments),o=r[r.length-1];"function"==typeof o?r[r.length-1]=function(){"function"==typeof n?n(t):i.nextTick(t),o.apply(null,arguments)}:o||0===e.arguments.length?r.push((()=>{t()})):r[r.length-1]=()=>{t()},e.fn.apply(e.this,r)}),1)}push(e,t){this.ready||t?this.queue.push(e):this.buffer.push(e)}processBuffer(){this.ready=!0,this.buffer.forEach((e=>{this.queue.push(e)})),this.buffer=[]}}},98:(e,t,r)=>{const n=r(908).BinarySearchTree,i=r(118),{uniq:o,isDate:a}=r(988),s=(e,t)=>e===t;function c(e){return null===e?"$null":"string"==typeof e?"$string"+e:"boolean"==typeof e?"$boolean"+e:"number"==typeof e?"$number"+e:a(e)?"$date"+e.getTime():e}e.exports=class{constructor(e){this.fieldName=e.fieldName,this.unique=e.unique||!1,this.sparse=e.sparse||!1,this.treeOptions={unique:this.unique,compareKeys:i.compareThings,checkValueEquality:s},this.reset()}reset(e){this.tree=new n(this.treeOptions),e&&this.insert(e)}insert(e){let t,r,n;if(Array.isArray(e))return void this.insertMultipleDocs(e);const a=i.getDotValue(e,this.fieldName);if(void 0!==a||!this.sparse)if(Array.isArray(a)){t=o(a,c);for(let i=0;i<t.length;i+=1)try{this.tree.insert(t[i],e)}catch(e){n=e,r=i;break}if(n){for(let n=0;n<r;n+=1)this.tree.delete(t[n],e);throw n}}else this.tree.insert(a,e)}insertMultipleDocs(e){let t,r;for(let n=0;n<e.length;n+=1)try{this.insert(e[n])}catch(e){t=e,r=n;break}if(t){for(let t=0;t<r;t+=1)this.remove(e[t]);throw t}}remove(e){if(Array.isArray(e))return void e.forEach((e=>{this.remove(e)}));const t=i.getDotValue(e,this.fieldName);void 0===t&&this.sparse||(Array.isArray(t)?o(t,c).forEach((t=>{this.tree.delete(t,e)})):this.tree.delete(t,e))}update(e,t){if(Array.isArray(e))this.updateMultipleDocs(e);else{this.remove(e);try{this.insert(t)}catch(t){throw this.insert(e),t}}}updateMultipleDocs(e){let t,r;for(let t=0;t<e.length;t+=1)this.remove(e[t].oldDoc);for(let n=0;n<e.length;n+=1)try{this.insert(e[n].newDoc)}catch(e){r=e,t=n;break}if(r){for(let r=0;r<t;r+=1)this.remove(e[r].newDoc);for(let t=0;t<e.length;t+=1)this.insert(e[t].oldDoc);throw r}}revertUpdate(e,t){const r=[];Array.isArray(e)?(e.forEach((e=>{r.push({oldDoc:e.newDoc,newDoc:e.oldDoc})})),this.update(r)):this.update(t,e)}getMatching(e){if(Array.isArray(e)){const t={},r=[];return e.forEach((e=>{this.getMatching(e).forEach((e=>{t[e._id]=e}))})),Object.keys(t).forEach((e=>{r.push(t[e])})),r}return this.tree.search(e)}getBetweenBounds(e){return this.tree.betweenBounds(e)}getAll(){const e=[];return this.tree.executeOnEveryNode((t=>{e.push(...t.data)})),e}}},118:(e,t,r)=>{const{uniq:n,isDate:i,isRegExp:o}=r(988),a={},s={},c={},u={},l={},f=(e,t)=>{if("number"==typeof e&&(e=e.toString()),!("$"!==e[0]||"$$date"===e&&"number"==typeof t||"$$deleted"===e&&!0===t||"$$indexCreated"===e||"$$indexRemoved"===e))throw new Error("Field names cannot begin with the $ character");if(-1!==e.indexOf("."))throw new Error("Field names cannot contain a .")},h=e=>{if(Array.isArray(e)&&e.forEach((e=>{h(e)})),"object"==typeof e&&null!==e)for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(f(t,e[t]),h(e[t]))};function d(e,t){if("boolean"==typeof e||"number"==typeof e||"string"==typeof e||null===e||i(e))return e;if(Array.isArray(e))return e.map((e=>d(e,t)));if("object"==typeof e){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(!t||"$"!==n[0]&&-1===n.indexOf("."))&&(r[n]=d(e[n],t));return r}}const p=e=>"boolean"==typeof e||"number"==typeof e||"string"==typeof e||null===e||i(e)||Array.isArray(e),y=(e,t)=>e<t?-1:e>t?1:0,v=(e,t)=>{const r=Math.min(e.length,t.length);for(let n=0;n<r;n+=1){const r=g(e[n],t[n]);if(0!==r)return r}return y(e.length,t.length)},g=(e,t,r)=>{const n=r||y;if(void 0===e)return void 0===t?0:-1;if(void 0===t)return 1;if(null===e)return null===t?0:-1;if(null===t)return 1;if("number"==typeof e)return"number"==typeof t?y(e,t):-1;if("number"==typeof t)return"number"==typeof e?y(e,t):1;if("string"==typeof e)return"string"==typeof t?n(e,t):-1;if("string"==typeof t)return"string"==typeof e?n(e,t):1;if("boolean"==typeof e)return"boolean"==typeof t?y(e,t):-1;if("boolean"==typeof t)return"boolean"==typeof e?y(e,t):1;if(i(e))return i(t)?y(e.getTime(),t.getTime()):-1;if(i(t))return i(e)?y(e.getTime(),t.getTime()):1;if(Array.isArray(e))return Array.isArray(t)?v(e,t):-1;if(Array.isArray(t))return Array.isArray(e)?v(e,t):1;const o=Object.keys(e).sort(),a=Object.keys(t).sort();for(let r=0;r<Math.min(o.length,a.length);r+=1){const n=g(e[o[r]],t[a[r]]);if(0!==n)return n}return y(o.length,a.length)};s.$set=(e,t,r)=>{e[t]=r},s.$unset=(e,t,r)=>{delete e[t]},s.$push=(e,t,r)=>{if(Object.prototype.hasOwnProperty.call(e,t)||(e[t]=[]),!Array.isArray(e[t]))throw new Error("Can't $push an element on non-array values");if(null!==r&&"object"==typeof r&&r.$slice&&void 0===r.$each&&(r.$each=[]),null!==r&&"object"==typeof r&&r.$each){if(Object.keys(r).length>=3||2===Object.keys(r).length&&void 0===r.$slice)throw new Error("Can only use $slice in cunjunction with $each when $push to array");if(!Array.isArray(r.$each))throw new Error("$each requires an array value");if(r.$each.forEach((r=>{e[t].push(r)})),void 0===r.$slice||"number"!=typeof r.$slice)return;if(0===r.$slice)e[t]=[];else{let n,i;const o=e[t].length;r.$slice<0?(n=Math.max(0,o+r.$slice),i=o):r.$slice>0&&(n=0,i=Math.min(o,r.$slice)),e[t]=e[t].slice(n,i)}}else e[t].push(r)},s.$addToSet=(e,t,r)=>{if(Object.prototype.hasOwnProperty.call(e,t)||(e[t]=[]),!Array.isArray(e[t]))throw new Error("Can't $addToSet an element on non-array values");if(null!==r&&"object"==typeof r&&r.$each){if(Object.keys(r).length>1)throw new Error("Can't use another field in conjunction with $each");if(!Array.isArray(r.$each))throw new Error("$each requires an array value");r.$each.forEach((r=>{s.$addToSet(e,t,r)}))}else{let n=!0;e[t].forEach((e=>{0===g(e,r)&&(n=!1)})),n&&e[t].push(r)}},s.$pop=(e,t,r)=>{if(!Array.isArray(e[t]))throw new Error("Can't $pop an element from non-array values");if("number"!=typeof r)throw new Error(`${r} isn't an integer, can't use it with $pop`);0!==r&&(e[t]=r>0?e[t].slice(0,e[t].length-1):e[t].slice(1))},s.$pull=(e,t,r)=>{if(!Array.isArray(e[t]))throw new Error("Can't $pull an element from non-array values");const n=e[t];for(let e=n.length-1;e>=0;e-=1)_(n[e],r)&&n.splice(e,1)},s.$inc=(e,t,r)=>{if("number"!=typeof r)throw new Error(`${r} must be a number`);if("number"!=typeof e[t]){if(Object.prototype.hasOwnProperty.call(e,t))throw new Error("Don't use the $inc modifier on non-number fields");e[t]=r}else e[t]+=r},s.$max=(e,t,r)=>{(void 0===e[t]||r>e[t])&&(e[t]=r)},s.$min=(e,t,r)=>{(void 0===e[t]||r<e[t])&&(e[t]=r)},Object.keys(s).forEach((e=>{a[e]=(e=>(t,r,n)=>{const i="string"==typeof r?r.split("."):r;if(1===i.length)s[e](t,r,n);else{if(void 0===t[i[0]]){if("$unset"===e)return;t[i[0]]={}}a[e](t[i[0]],i.slice(1),n)}})(e)}));const m=(e,t)=>{const r="string"==typeof t?t.split("."):t;if(e){if(0===r.length)return e;if(1===r.length)return e[r[0]];if(Array.isArray(e[r[0]])){const t=parseInt(r[1],10);return"number"!=typeof t||isNaN(t)?e[r[0]].map((e=>m(e,r.slice(1)))):m(e[r[0]][t],r.slice(2))}return m(e[r[0]],r.slice(1))}},b=(e,t)=>{if(null===e||"string"==typeof e||"boolean"==typeof e||"number"==typeof e||null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t)return e===t;if(i(e)||i(t))return i(e)&&i(t)&&e.getTime()===t.getTime();if((!Array.isArray(e)||!Array.isArray(t))&&(Array.isArray(e)||Array.isArray(t))||void 0===e||void 0===t)return!1;let r,n;try{r=Object.keys(e),n=Object.keys(t)}catch(e){return!1}if(r.length!==n.length)return!1;for(const i of r){if(-1===n.indexOf(i))return!1;if(!b(e[i],t[i]))return!1}return!0},w=(e,t)=>!("string"!=typeof e&&"number"!=typeof e&&!i(e)&&"string"!=typeof t&&"number"!=typeof t&&!i(t))&&typeof e==typeof t;c.$lt=(e,t)=>w(e,t)&&e<t,c.$lte=(e,t)=>w(e,t)&&e<=t,c.$gt=(e,t)=>w(e,t)&&e>t,c.$gte=(e,t)=>w(e,t)&&e>=t,c.$ne=(e,t)=>void 0===e||!b(e,t),c.$in=(e,t)=>{if(!Array.isArray(t))throw new Error("$in operator called with a non-array");for(const r of t)if(b(e,r))return!0;return!1},c.$nin=(e,t)=>{if(!Array.isArray(t))throw new Error("$nin operator called with a non-array");return!c.$in(e,t)},c.$regex=(e,t)=>{if(!o(t))throw new Error("$regex operator called with non regular expression");return"string"==typeof e&&t.test(e)},c.$exists=(e,t)=>(t=!(!t&&""!==t),void 0===e?!t:t),c.$size=(e,t)=>{if(!Array.isArray(e))return!1;if(t%1!=0)throw new Error("$size operator called without an integer");return e.length===t},c.$elemMatch=(e,t)=>!!Array.isArray(e)&&e.some((e=>_(e,t))),l.$size=!0,l.$elemMatch=!0,u.$or=(e,t)=>{if(!Array.isArray(t))throw new Error("$or operator used without an array");for(let r=0;r<t.length;r+=1)if(_(e,t[r]))return!0;return!1},u.$and=(e,t)=>{if(!Array.isArray(t))throw new Error("$and operator used without an array");for(let r=0;r<t.length;r+=1)if(!_(e,t[r]))return!1;return!0},u.$not=(e,t)=>!_(e,t),u.$where=(e,t)=>{if("function"!=typeof t)throw new Error("$where operator used without a function");const r=t.call(e);if("boolean"!=typeof r)throw new Error("$where function must return boolean");return r};const _=(e,t)=>{if(p(e)||p(t))return k({needAKey:e},"needAKey",t);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const n=t[r];if("$"===r[0]){if(!u[r])throw new Error(`Unknown logical operator ${r}`);if(!u[r](e,n))return!1}else if(!k(e,r,n))return!1}return!0};function k(e,t,r,n){const i=m(e,t);if(Array.isArray(i)&&!n){if(Array.isArray(r))return k(e,t,r,!0);if(null!==r&&"object"==typeof r&&!o(r))for(const n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&l[n])return k(e,t,r,!0);for(const e of i)if(k({k:e},"k",r))return!0;return!1}if(null!==r&&"object"==typeof r&&!o(r)&&!Array.isArray(r)){const e=Object.keys(r),t=e.map((e=>e[0])),n=t.filter((e=>"$"===e));if(0!==n.length&&n.length!==t.length)throw new Error("You cannot mix operators and normal fields");if(n.length>0){for(const t of e){if(!c[t])throw new Error(`Unknown comparison function ${t}`);if(!c[t](i,r[t]))return!1}return!0}}return o(r)?c.$regex(i,r):b(i,r)}e.exports.serialize=e=>JSON.stringify(e,(function(e,t){if(f(e,t),void 0!==t)return null===t?null:"function"==typeof this[e].getTime?{$$date:this[e].getTime()}:t})),e.exports.deserialize=e=>JSON.parse(e,(function(e,t){return"$$date"===e?new Date(t):"string"==typeof t||"number"==typeof t||"boolean"==typeof t||null===t?t:t&&t.$$date?t.$$date:t})),e.exports.deepCopy=d,e.exports.checkObject=h,e.exports.isPrimitiveType=p,e.exports.modify=(e,t)=>{const r=Object.keys(t),i=r.map((e=>e[0])),o=i.filter((e=>"$"===e));let s,c;if(-1!==r.indexOf("_id")&&t._id!==e._id)throw new Error("You cannot change a document's _id");if(0!==o.length&&o.length!==i.length)throw new Error("You cannot mix modifiers and normal fields");if(0===o.length?(s=d(t),s._id=e._id):(c=n(r),s=d(e),c.forEach((e=>{if(!a[e])throw new Error(`Unknown modifier ${e}`);if("object"!=typeof t[e])throw new Error(`Modifier ${e}'s argument must be an object`);Object.keys(t[e]).forEach((r=>{a[e](s,r,t[e][r])}))}))),h(s),e._id!==s._id)throw new Error("You can't change a document's _id");return s},e.exports.getDotValue=m,e.exports.match=_,e.exports.areThingsEqual=b,e.exports.compareThings=g},328:(e,t,r)=>{var n=r(155);const i=r(470),o=r(223),a=r(159),s=r(98),c=r(118),u=r(302);class l{constructor(e){if(this.db=e.db,this.inMemoryOnly=this.db.inMemoryOnly,this.filename=this.db.filename,this.corruptAlertThreshold=void 0!==e.corruptAlertThreshold?e.corruptAlertThreshold:.1,!this.inMemoryOnly&&this.filename&&"~"===this.filename.charAt(this.filename.length-1))throw new Error("The datafile name can't end with a ~, which is reserved for crash safe backup files");if(e.afterSerialization&&!e.beforeDeserialization)throw new Error("Serialization hook defined but deserialization hook undefined, cautiously refusing to start NeDB to prevent dataloss");if(!e.afterSerialization&&e.beforeDeserialization)throw new Error("Serialization hook undefined but deserialization hook defined, cautiously refusing to start NeDB to prevent dataloss");this.afterSerialization=e.afterSerialization||(e=>e),this.beforeDeserialization=e.beforeDeserialization||(e=>e);for(let e=1;e<30;e+=1)for(let t=0;t<10;t+=1){const t=a.uid(e);if(this.beforeDeserialization(this.afterSerialization(t))!==t)throw new Error("beforeDeserialization is not the reverse of afterSerialization, cautiously refusing to start NeDB to prevent dataloss")}this.filename&&e.nodeWebkitAppName&&(console.log("=================================================================="),console.log("WARNING: The nodeWebkitAppName option is deprecated"),console.log("To get the path to the directory where Node Webkit stores the data"),console.log("for your app, use the internal nw.gui module like this"),console.log("require('nw.gui').App.dataPath"),console.log("See https://github.com/rogerwang/node-webkit/issues/500"),console.log("=================================================================="),this.filename=l.getNWAppFilename(e.nodeWebkitAppName,this.filename))}persistCachedDatabase(e=(()=>{})){let t="";if(this.inMemoryOnly)return e(null);this.db.getAllData().forEach((e=>{t+=this.afterSerialization(c.serialize(e))+"\n"})),Object.keys(this.db.indexes).forEach((e=>{"_id"!==e&&(t+=this.afterSerialization(c.serialize({$$indexCreated:{fieldName:e,unique:this.db.indexes[e].unique,sparse:this.db.indexes[e].sparse}}))+"\n")})),u.crashSafeWriteFile(this.filename,t,(t=>t?e(t):(this.db.emit("compaction.done"),e(null))))}compactDatafile(){this.db.executor.push({this:this,fn:this.persistCachedDatabase,arguments:[]})}setAutocompactionInterval(e){const t=Math.max(e||0,5e3);this.stopAutocompaction(),this.autocompactionIntervalId=setInterval((()=>{this.compactDatafile()}),t)}stopAutocompaction(){this.autocompactionIntervalId&&clearInterval(this.autocompactionIntervalId)}persistNewState(e,t=(()=>{})){let r="";return this.inMemoryOnly?t(null):(e.forEach((e=>{r+=this.afterSerialization(c.serialize(e))+"\n"})),0===r.length?t(null):void u.appendFile(this.filename,r,"utf8",(e=>t(e))))}treatRawData(e){const t=e.split("\n"),r={},n=[],i={};let o=-1;for(const e of t)try{const t=c.deserialize(this.beforeDeserialization(e));t._id?!0===t.$$deleted?delete r[t._id]:r[t._id]=t:t.$$indexCreated&&null!=t.$$indexCreated.fieldName?i[t.$$indexCreated.fieldName]=t.$$indexCreated:"string"==typeof t.$$indexRemoved&&delete i[t.$$indexRemoved]}catch(e){o+=1}if(t.length>0&&o/t.length>this.corruptAlertThreshold)throw new Error(`More than ${Math.floor(100*this.corruptAlertThreshold)}% of the data file is corrupt, the wrong beforeDeserialization hook may be used. Cautiously refusing to start NeDB to prevent dataloss`);return n.push(...Object.values(r)),{data:n,indexes:i}}loadDatabase(e=(()=>{})){if(this.db.resetIndexes(),this.inMemoryOnly)return e(null);o.waterfall([e=>{l.ensureDirectoryExists(i.dirname(this.filename),(t=>{u.ensureDatafileIntegrity(this.filename,(t=>{u.readFile(this.filename,"utf8",((t,r)=>{if(t)return e(t);let n;try{n=this.treatRawData(r)}catch(t){return e(t)}Object.keys(n.indexes).forEach((e=>{this.db.indexes[e]=new s(n.indexes[e])}));try{this.db.resetIndexes(n.data)}catch(t){return this.db.resetIndexes(),e(t)}this.db.persistence.persistCachedDatabase(e)}))}))}))}],(t=>t?e(t):(this.db.executor.processBuffer(),e(null))))}static ensureDirectoryExists(e,t=(()=>{})){u.mkdir(e,{recursive:!0},(e=>{t(e)}))}static getNWAppFilename(e,t){let r;if("win32"===n.platform||"win64"===n.platform){if(r=n.env.LOCALAPPDATA||n.env.APPDATA,!r)throw new Error("Couldn't find the base application data folder");r=i.join(r,e)}else if("darwin"===n.platform){if(r=n.env.HOME,!r)throw new Error("Couldn't find the base application data directory");r=i.join(r,"Library","Application Support",e)}else{if("linux"!==n.platform)throw new Error(`Can't use the Node Webkit relative path for platform ${n.platform}`);if(r=n.env.HOME,!r)throw new Error("Couldn't find the base application data directory");r=i.join(r,".config",e)}return i.join(r,"nedb-data",t)}}e.exports=l},988:e=>{const t=e=>Object.prototype.toString.call(e),r=e=>"object"==typeof e&&null!==e;e.exports.uniq=(e,t)=>t?[...new Map(e.map((e=>[t(e),e]))).values()]:[...new Set(e)],e.exports.isDate=e=>r(e)&&"[object Date]"===t(e),e.exports.isRegExp=e=>r(e)&&"[object RegExp]"===t(e)},908:(e,t,r)=>{e.exports.BinarySearchTree=r(902),r(522)},522:(e,t,r)=>{const n=r(902),i=r(639);class o{constructor(e){this.tree=new a(e)}checkIsAVLT(){this.tree.checkIsAVLT()}insert(e,t){const r=this.tree.insert(e,t);r&&(this.tree=r)}delete(e,t){const r=this.tree.delete(e,t);r&&(this.tree=r)}}class a extends n{constructor(e){super(),e=e||{},this.left=null,this.right=null,this.parent=void 0!==e.parent?e.parent:null,Object.prototype.hasOwnProperty.call(e,"key")&&(this.key=e.key),this.data=Object.prototype.hasOwnProperty.call(e,"value")?[e.value]:[],this.unique=e.unique||!1,this.compareKeys=e.compareKeys||i.defaultCompareKeysFunction,this.checkValueEquality=e.checkValueEquality||i.defaultCheckValueEquality}checkHeightCorrect(){if(!Object.prototype.hasOwnProperty.call(this,"key"))return;if(this.left&&void 0===this.left.height)throw new Error("Undefined height for node "+this.left.key);if(this.right&&void 0===this.right.height)throw new Error("Undefined height for node "+this.right.key);if(void 0===this.height)throw new Error("Undefined height for node "+this.key);const e=this.left?this.left.height:0,t=this.right?this.right.height:0;if(this.height!==1+Math.max(e,t))throw new Error("Height constraint failed for node "+this.key);this.left&&this.left.checkHeightCorrect(),this.right&&this.right.checkHeightCorrect()}balanceFactor(){return(this.left?this.left.height:0)-(this.right?this.right.height:0)}checkBalanceFactors(){if(Math.abs(this.balanceFactor())>1)throw new Error("Tree is unbalanced at node "+this.key);this.left&&this.left.checkBalanceFactors(),this.right&&this.right.checkBalanceFactors()}checkIsAVLT(){super.checkIsBST(),this.checkHeightCorrect(),this.checkBalanceFactors()}rightRotation(){const e=this,t=this.left;if(!t)return e;const r=t.right;e.parent?(t.parent=e.parent,e.parent.left===e?e.parent.left=t:e.parent.right=t):t.parent=null,t.right=e,e.parent=t,e.left=r,r&&(r.parent=e);const n=t.left?t.left.height:0,i=r?r.height:0,o=e.right?e.right.height:0;return e.height=Math.max(i,o)+1,t.height=Math.max(n,e.height)+1,t}leftRotation(){const e=this,t=this.right;if(!t)return this;const r=t.left;e.parent?(t.parent=e.parent,e.parent.left===e?e.parent.left=t:e.parent.right=t):t.parent=null,t.left=e,e.parent=t,e.right=r,r&&(r.parent=e);const n=e.left?e.left.height:0,i=r?r.height:0,o=t.right?t.right.height:0;return e.height=Math.max(n,i)+1,t.height=Math.max(o,e.height)+1,t}rightTooSmall(){return this.balanceFactor()<=1?this:(this.left.balanceFactor()<0&&this.left.leftRotation(),this.rightRotation())}leftTooSmall(){return this.balanceFactor()>=-1?this:(this.right.balanceFactor()>0&&this.right.rightRotation(),this.leftRotation())}rebalanceAlongPath(e){let t,r,n=this;if(!Object.prototype.hasOwnProperty.call(this,"key"))return delete this.height,this;for(r=e.length-1;r>=0;r-=1)e[r].height=1+Math.max(e[r].left?e[r].left.height:0,e[r].right?e[r].right.height:0),e[r].balanceFactor()>1&&(t=e[r].rightTooSmall(),0===r&&(n=t)),e[r].balanceFactor()<-1&&(t=e[r].leftTooSmall(),0===r&&(n=t));return n}insert(e,t){const r=[];let n=this;if(!Object.prototype.hasOwnProperty.call(this,"key"))return this.key=e,this.data.push(t),this.height=1,this;for(;;){if(0===n.compareKeys(n.key,e)){if(n.unique){const t=new Error(`Can't insert key ${e}, it violates the unique constraint`);throw t.key=e,t.errorType="uniqueViolated",t}return n.data.push(t),this}if(r.push(n),n.compareKeys(e,n.key)<0){if(!n.left){r.push(n.createLeftChild({key:e,value:t}));break}n=n.left}else{if(!n.right){r.push(n.createRightChild({key:e,value:t}));break}n=n.right}}return this.rebalanceAlongPath(r)}delete(e,t){const r=[];let n,i=this;const o=[];if(!Object.prototype.hasOwnProperty.call(this,"key"))return this;for(;0!==i.compareKeys(e,i.key);)if(o.push(i),i.compareKeys(e,i.key)<0){if(!i.left)return this;i=i.left}else{if(!i.right)return this;i=i.right}if(i.data.length>1&&void 0!==t)return i.data.forEach((function(e){i.checkValueEquality(e,t)||r.push(e)})),i.data=r,this;if(!i.left&&!i.right)return i===this?(delete i.key,i.data=[],delete i.height,this):(i.parent.left===i?i.parent.left=null:i.parent.right=null,this.rebalanceAlongPath(o));if(!i.left||!i.right)return n=i.left?i.left:i.right,i===this?(n.parent=null,n):(i.parent.left===i?(i.parent.left=n,n.parent=i.parent):(i.parent.right=n,n.parent=i.parent),this.rebalanceAlongPath(o));if(o.push(i),n=i.left,!n.right)return i.key=n.key,i.data=n.data,i.left=n.left,n.left&&(n.left.parent=i),this.rebalanceAlongPath(o);for(;n.right;)o.push(n),n=n.right;return i.key=n.key,i.data=n.data,n.parent.right=n.left,n.left&&(n.left.parent=n.parent),this.rebalanceAlongPath(o)}}o._AVLTree=a,["getNumberOfKeys","search","betweenBounds","prettyPrint","executeOnEveryNode"].forEach((function(e){o.prototype[e]=function(){return this.tree[e].apply(this.tree,arguments)}})),e.exports=o},902:(e,t,r)=>{const n=r(639);function i(e,t){for(let r=0;r<t.length;r+=1)e.push(t[r])}e.exports=class{constructor(e){e=e||{},this.left=null,this.right=null,this.parent=void 0!==e.parent?e.parent:null,Object.prototype.hasOwnProperty.call(e,"key")&&(this.key=e.key),this.data=Object.prototype.hasOwnProperty.call(e,"value")?[e.value]:[],this.unique=e.unique||!1,this.compareKeys=e.compareKeys||n.defaultCompareKeysFunction,this.checkValueEquality=e.checkValueEquality||n.defaultCheckValueEquality}getMaxKeyDescendant(){return this.right?this.right.getMaxKeyDescendant():this}getMaxKey(){return this.getMaxKeyDescendant().key}getMinKeyDescendant(){return this.left?this.left.getMinKeyDescendant():this}getMinKey(){return this.getMinKeyDescendant().key}checkAllNodesFullfillCondition(e){Object.prototype.hasOwnProperty.call(this,"key")&&(e(this.key,this.data),this.left&&this.left.checkAllNodesFullfillCondition(e),this.right&&this.right.checkAllNodesFullfillCondition(e))}checkNodeOrdering(){Object.prototype.hasOwnProperty.call(this,"key")&&(this.left&&(this.left.checkAllNodesFullfillCondition((e=>{if(this.compareKeys(e,this.key)>=0)throw new Error(`Tree with root ${this.key} is not a binary search tree`)})),this.left.checkNodeOrdering()),this.right&&(this.right.checkAllNodesFullfillCondition((e=>{if(this.compareKeys(e,this.key)<=0)throw new Error(`Tree with root ${this.key} is not a binary search tree`)})),this.right.checkNodeOrdering()))}checkInternalPointers(){if(this.left){if(this.left.parent!==this)throw new Error(`Parent pointer broken for key ${this.key}`);this.left.checkInternalPointers()}if(this.right){if(this.right.parent!==this)throw new Error(`Parent pointer broken for key ${this.key}`);this.right.checkInternalPointers()}}checkIsBST(){if(this.checkNodeOrdering(),this.checkInternalPointers(),this.parent)throw new Error("The root shouldn't have a parent")}getNumberOfKeys(){let e;return Object.prototype.hasOwnProperty.call(this,"key")?(e=1,this.left&&(e+=this.left.getNumberOfKeys()),this.right&&(e+=this.right.getNumberOfKeys()),e):0}createSimilar(e){return(e=e||{}).unique=this.unique,e.compareKeys=this.compareKeys,e.checkValueEquality=this.checkValueEquality,new this.constructor(e)}createLeftChild(e){const t=this.createSimilar(e);return t.parent=this,this.left=t,t}createRightChild(e){const t=this.createSimilar(e);return t.parent=this,this.right=t,t}insert(e,t){if(!Object.prototype.hasOwnProperty.call(this,"key"))return this.key=e,void this.data.push(t);if(0!==this.compareKeys(this.key,e))this.compareKeys(e,this.key)<0?this.left?this.left.insert(e,t):this.createLeftChild({key:e,value:t}):this.right?this.right.insert(e,t):this.createRightChild({key:e,value:t});else{if(this.unique){const t=new Error(`Can't insert key ${e}, it violates the unique constraint`);throw t.key=e,t.errorType="uniqueViolated",t}this.data.push(t)}}search(e){return Object.prototype.hasOwnProperty.call(this,"key")?0===this.compareKeys(this.key,e)?this.data:this.compareKeys(e,this.key)<0?this.left?this.left.search(e):[]:this.right?this.right.search(e):[]:[]}getLowerBoundMatcher(e){return Object.prototype.hasOwnProperty.call(e,"$gt")||Object.prototype.hasOwnProperty.call(e,"$gte")?Object.prototype.hasOwnProperty.call(e,"$gt")&&Object.prototype.hasOwnProperty.call(e,"$gte")?0===this.compareKeys(e.$gte,e.$gt)?t=>this.compareKeys(t,e.$gt)>0:this.compareKeys(e.$gte,e.$gt)>0?t=>this.compareKeys(t,e.$gte)>=0:t=>this.compareKeys(t,e.$gt)>0:Object.prototype.hasOwnProperty.call(e,"$gt")?t=>this.compareKeys(t,e.$gt)>0:t=>this.compareKeys(t,e.$gte)>=0:()=>!0}getUpperBoundMatcher(e){return Object.prototype.hasOwnProperty.call(e,"$lt")||Object.prototype.hasOwnProperty.call(e,"$lte")?Object.prototype.hasOwnProperty.call(e,"$lt")&&Object.prototype.hasOwnProperty.call(e,"$lte")?0===this.compareKeys(e.$lte,e.$lt)?t=>this.compareKeys(t,e.$lt)<0:this.compareKeys(e.$lte,e.$lt)<0?t=>this.compareKeys(t,e.$lte)<=0:t=>this.compareKeys(t,e.$lt)<0:Object.prototype.hasOwnProperty.call(e,"$lt")?t=>this.compareKeys(t,e.$lt)<0:t=>this.compareKeys(t,e.$lte)<=0:()=>!0}betweenBounds(e,t,r){const n=[];return Object.prototype.hasOwnProperty.call(this,"key")?(t=t||this.getLowerBoundMatcher(e),r=r||this.getUpperBoundMatcher(e),t(this.key)&&this.left&&i(n,this.left.betweenBounds(e,t,r)),t(this.key)&&r(this.key)&&i(n,this.data),r(this.key)&&this.right&&i(n,this.right.betweenBounds(e,t,r)),n):[]}deleteIfLeaf(){return!(this.left||this.right||(this.parent?(this.parent.left===this?this.parent.left=null:this.parent.right=null,0):(delete this.key,this.data=[],0)))}deleteIfOnlyOneChild(){let e;return this.left&&!this.right&&(e=this.left),!this.left&&this.right&&(e=this.right),!!e&&(this.parent?(this.parent.left===this?(this.parent.left=e,e.parent=this.parent):(this.parent.right=e,e.parent=this.parent),!0):(this.key=e.key,this.data=e.data,this.left=null,e.left&&(this.left=e.left,e.left.parent=this),this.right=null,e.right&&(this.right=e.right,e.right.parent=this),!0))}delete(e,t){const r=[];let n;if(Object.prototype.hasOwnProperty.call(this,"key"))if(this.compareKeys(e,this.key)<0)this.left&&this.left.delete(e,t);else if(this.compareKeys(e,this.key)>0)this.right&&this.right.delete(e,t);else if(0!==!this.compareKeys(e,this.key))return this.data.length>1&&void 0!==t?(this.data.forEach((e=>{this.checkValueEquality(e,t)||r.push(e)})),void(this.data=r)):void(this.deleteIfLeaf()||this.deleteIfOnlyOneChild()||(Math.random()>=.5?(n=this.left.getMaxKeyDescendant(),this.key=n.key,this.data=n.data,this===n.parent?(this.left=n.left,n.left&&(n.left.parent=n.parent)):(n.parent.right=n.left,n.left&&(n.left.parent=n.parent))):(n=this.right.getMinKeyDescendant(),this.key=n.key,this.data=n.data,this===n.parent?(this.right=n.right,n.right&&(n.right.parent=n.parent)):(n.parent.left=n.right,n.right&&(n.right.parent=n.parent)))))}executeOnEveryNode(e){this.left&&this.left.executeOnEveryNode(e),e(this),this.right&&this.right.executeOnEveryNode(e)}prettyPrint(e,t){t=t||"",console.log(`${t}* ${this.key}`),e&&console.log(`${t}* ${this.data}`),(this.left||this.right)&&(this.left?this.left.prettyPrint(e,`${t}  `):console.log(`${t}  *`),this.right?this.right.prettyPrint(e,`${t}  `):console.log(`${t}  *`))}}},639:e=>{const t=e=>{if(0===e)return[];if(1===e)return[0];const r=t(e-1),n=Math.floor(Math.random()*e);return r.splice(n,0,e-1),r};e.exports.getRandomArray=t,e.exports.defaultCompareKeysFunction=(e,t)=>{if(e<t)return-1;if(e>t)return 1;if(e===t)return 0;const r=new Error("Couldn't compare elements");throw r.a=e,r.b=t,r},e.exports.defaultCheckValueEquality=(e,t)=>e===t},223:(e,t,r)=>{var n,i=r(155),o=r(475).setImmediate;!function(){var r,a,s={};function c(e){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,e.apply(r,arguments)}}null!=(r=this)&&(a=r.async),s.noConflict=function(){return r.async=a,s};var u=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r+=1)t(e[r],r,e)},l=function(e,t){if(e.map)return e.map(t);var r=[];return u(e,(function(e,n,i){r.push(t(e,n,i))})),r},f=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t};void 0!==i&&i.nextTick?(s.nextTick=i.nextTick,s.setImmediate=void 0!==o?function(e){o(e)}:s.nextTick):"function"==typeof o?(s.nextTick=function(e){o(e)},s.setImmediate=s.nextTick):(s.nextTick=function(e){setTimeout(e,0)},s.setImmediate=s.nextTick),s.each=function(e,t,r){if(r=r||function(){},!e.length)return r();var n=0;u(e,(function(i){t(i,c((function(t){t?(r(t),r=function(){}):(n+=1)>=e.length&&r(null)})))}))},s.forEach=s.each,s.eachSeries=function(e,t,r){if(r=r||function(){},!e.length)return r();var n=0,i=function(){t(e[n],(function(t){t?(r(t),r=function(){}):(n+=1)>=e.length?r(null):i()}))};i()},s.forEachSeries=s.eachSeries,s.eachLimit=function(e,t,r,n){h(t).apply(null,[e,r,n])},s.forEachLimit=s.eachLimit;var h=function(e){return function(t,r,n){if(n=n||function(){},!t.length||e<=0)return n();var i=0,o=0,a=0;!function s(){if(i>=t.length)return n();for(;a<e&&o<t.length;)a+=1,r(t[(o+=1)-1],(function(e){e?(n(e),n=function(){}):(a-=1,(i+=1)>=t.length?n():s())}))}()}},d=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[s.each].concat(t))}},p=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[s.eachSeries].concat(t))}},y=function(e,t,r,n){var i=[];e(t=l(t,(function(e,t){return{index:t,value:e}})),(function(e,t){r(e.value,(function(r,n){i[e.index]=n,t(r)}))}),(function(e){n(e,i)}))};s.map=d(y),s.mapSeries=p(y),s.mapLimit=function(e,t,r,n){return v(t)(e,r,n)};var v=function(e){return function(e,t){return function(){var r=Array.prototype.slice.call(arguments);return t.apply(null,[h(e)].concat(r))}}(e,y)};s.reduce=function(e,t,r,n){s.eachSeries(e,(function(e,n){r(t,e,(function(e,r){t=r,n(e)}))}),(function(e){n(e,t)}))},s.inject=s.reduce,s.foldl=s.reduce,s.reduceRight=function(e,t,r,n){var i=l(e,(function(e){return e})).reverse();s.reduce(i,t,r,n)},s.foldr=s.reduceRight;var g=function(e,t,r,n){var i=[];e(t=l(t,(function(e,t){return{index:t,value:e}})),(function(e,t){r(e.value,(function(r){r&&i.push(e),t()}))}),(function(e){n(l(i.sort((function(e,t){return e.index-t.index})),(function(e){return e.value})))}))};s.filter=d(g),s.filterSeries=p(g),s.select=s.filter,s.selectSeries=s.filterSeries;var m=function(e,t,r,n){var i=[];e(t=l(t,(function(e,t){return{index:t,value:e}})),(function(e,t){r(e.value,(function(r){r||i.push(e),t()}))}),(function(e){n(l(i.sort((function(e,t){return e.index-t.index})),(function(e){return e.value})))}))};s.reject=d(m),s.rejectSeries=p(m);var b=function(e,t,r,n){e(t,(function(e,t){r(e,(function(r){r?(n(e),n=function(){}):t()}))}),(function(e){n()}))};s.detect=d(b),s.detectSeries=p(b),s.some=function(e,t,r){s.each(e,(function(e,n){t(e,(function(e){e&&(r(!0),r=function(){}),n()}))}),(function(e){r(!1)}))},s.any=s.some,s.every=function(e,t,r){s.each(e,(function(e,n){t(e,(function(e){e||(r(!1),r=function(){}),n()}))}),(function(e){r(!0)}))},s.all=s.every,s.sortBy=function(e,t,r){s.map(e,(function(e,r){t(e,(function(t,n){t?r(t):r(null,{value:e,criteria:n})}))}),(function(e,t){if(e)return r(e);r(null,l(t.sort((function(e,t){var r=e.criteria,n=t.criteria;return r<n?-1:r>n?1:0})),(function(e){return e.value})))}))},s.auto=function(e,t){t=t||function(){};var r=f(e);if(!r.length)return t(null);var n={},i=[],o=function(e){i.unshift(e)},a=function(){u(i.slice(0),(function(e){e()}))};o((function(){f(n).length===r.length&&(t(null,n),t=function(){})})),u(r,(function(r){var c=e[r]instanceof Function?[e[r]]:e[r],l=function(e){var i=Array.prototype.slice.call(arguments,1);if(i.length<=1&&(i=i[0]),e){var o={};u(f(n),(function(e){o[e]=n[e]})),o[r]=i,t(e,o),t=function(){}}else n[r]=i,s.setImmediate(a)},h=c.slice(0,Math.abs(c.length-1))||[],d=function(){return t=function(e,t){return e&&n.hasOwnProperty(t)},i=!0,((e=h).reduce?e.reduce(t,i):(u(e,(function(e,r,n){i=t(i,e)})),i))&&!n.hasOwnProperty(r);var e,t,i};if(d())c[c.length-1](l,n);else{var p=function(){d()&&(function(e){for(var t=0;t<i.length;t+=1)if(i[t]===e)return void i.splice(t,1)}(p),c[c.length-1](l,n))};o(p)}}))},s.waterfall=function(e,t){if(t=t||function(){},e.constructor!==Array){var r=new Error("First argument to waterfall must be an array of functions");return t(r)}if(!e.length)return t();var n=function(e){return function(r){if(r)t.apply(null,arguments),t=function(){};else{var i=Array.prototype.slice.call(arguments,1),o=e.next();o?i.push(n(o)):i.push(t),s.setImmediate((function(){e.apply(null,i)}))}}};n(s.iterator(e))()};var w=function(e,t,r){if(r=r||function(){},t.constructor===Array)e.map(t,(function(e,t){e&&e((function(e){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),t.call(null,e,r)}))}),r);else{var n={};e.each(f(t),(function(e,r){t[e]((function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[e]=i,r(t)}))}),(function(e){r(e,n)}))}};s.parallel=function(e,t){w({map:s.map,each:s.each},e,t)},s.parallelLimit=function(e,t,r){w({map:v(t),each:h(t)},e,r)},s.series=function(e,t){if(t=t||function(){},e.constructor===Array)s.mapSeries(e,(function(e,t){e&&e((function(e){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),t.call(null,e,r)}))}),t);else{var r={};s.eachSeries(f(e),(function(t,n){e[t]((function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[t]=i,n(e)}))}),(function(e){t(e,r)}))}},s.iterator=function(e){var t=function(r){var n=function(){return e.length&&e[r].apply(null,arguments),n.next()};return n.next=function(){return r<e.length-1?t(r+1):null},n};return t(0)},s.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var _=function(e,t,r,n){var i=[];e(t,(function(e,t){r(e,(function(e,r){i=i.concat(r||[]),t(e)}))}),(function(e){n(e,i)}))};s.concat=d(_),s.concatSeries=p(_),s.whilst=function(e,t,r){e()?t((function(n){if(n)return r(n);s.whilst(e,t,r)})):r()},s.doWhilst=function(e,t,r){e((function(n){if(n)return r(n);t()?s.doWhilst(e,t,r):r()}))},s.until=function(e,t,r){e()?r():t((function(n){if(n)return r(n);s.until(e,t,r)}))},s.doUntil=function(e,t,r){e((function(n){if(n)return r(n);t()?r():s.doUntil(e,t,r)}))},s.queue=function(e,t){function r(e,r,n,i){r.constructor!==Array&&(r=[r]),u(r,(function(r){var o={data:r,callback:"function"==typeof i?i:null};n?e.tasks.unshift(o):e.tasks.push(o),e.saturated&&e.tasks.length===t&&e.saturated(),s.setImmediate(e.process)}))}void 0===t&&(t=1);var n=0,i={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,push:function(e,t){r(i,e,!1,t)},unshift:function(e,t){r(i,e,!0,t)},process:function(){if(n<i.concurrency&&i.tasks.length){var t=i.tasks.shift();i.empty&&0===i.tasks.length&&i.empty(),n+=1;var r=c((function(){n-=1,t.callback&&t.callback.apply(t,arguments),i.drain&&i.tasks.length+n===0&&i.drain(),i.process()}));e(t.data,r)}},length:function(){return i.tasks.length},running:function(){return n}};return i},s.cargo=function(e,t){var r=!1,n=[],i={tasks:n,payload:t,saturated:null,empty:null,drain:null,push:function(e,r){e.constructor!==Array&&(e=[e]),u(e,(function(e){n.push({data:e,callback:"function"==typeof r?r:null}),i.saturated&&n.length===t&&i.saturated()})),s.setImmediate(i.process)},process:function o(){if(!r)if(0!==n.length){var a="number"==typeof t?n.splice(0,t):n.splice(0),s=l(a,(function(e){return e.data}));i.empty&&i.empty(),r=!0,e(s,(function(){r=!1;var e=arguments;u(a,(function(t){t.callback&&t.callback.apply(null,e)})),o()}))}else i.drain&&i.drain()},length:function(){return n.length},running:function(){return r}};return i};var k=function(e){return function(t){var r=Array.prototype.slice.call(arguments,1);t.apply(null,r.concat([function(t){var r=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&u(r,(function(t){console[e](t)})))}]))}};s.log=k("log"),s.dir=k("dir"),s.memoize=function(e,t){var r={},n={};t=t||function(e){return e};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),a=t.apply(null,i);a in r?o.apply(null,r[a]):a in n?n[a].push(o):(n[a]=[o],e.apply(null,i.concat([function(){r[a]=arguments;var e=n[a];delete n[a];for(var t=0,i=e.length;t<i;t++)e[t].apply(null,arguments)}])))};return i.memo=r,i.unmemoized=e,i},s.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},s.times=function(e,t,r){for(var n=[],i=0;i<e;i++)n.push(i);return s.map(n,t,r)},s.timesSeries=function(e,t,r){for(var n=[],i=0;i<e;i++)n.push(i);return s.mapSeries(n,t,r)},s.compose=function(){var e=Array.prototype.reverse.call(arguments);return function(){var t=this,r=Array.prototype.slice.call(arguments),n=r.pop();s.reduce(e,r,(function(e,r,n){r.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);n(e,t)}]))}),(function(e,r){n.apply(t,[e].concat(r))}))}};var x=function(e,t){var r=function(){var r=this,n=Array.prototype.slice.call(arguments),i=n.pop();return e(t,(function(e,t){e.apply(r,n.concat([t]))}),i)};if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);return r.apply(this,n)}return r};s.applyEach=d(x),s.applyEachSeries=p(x),s.forever=function(e,t){!function r(n){if(n){if(t)return t(n);throw n}e(r)}()},void 0===(n=function(){return s}.apply(t,[]))||(e.exports=n)}()},187:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}y(e,t,o,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&y(e,"error",t,{once:!0})}(e,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function u(e,t,r,n){var i,o,a,u;if(s(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]),void 0===a)a=o[t]=r,++e._eventsCount;else if("function"==typeof a?a=o[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=c(e))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=l.bind(n);return i.listener=r,n.wrapFn=i,i}function h(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):p(i,i.length)}function d(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function y(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){n.once&&e.removeEventListener(t,i),r(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var u=c.length,l=p(c,u);for(r=0;r<u;++r)n(l[r],this,t)}return!0},o.prototype.addListener=function(e,t){return u(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return u(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,f(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,f(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,i,o,a;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},o.prototype.listenerCount=d,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},483:(e,t,r)=>{e.exports=function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[a]={exports:{}};t[a][0].call(u.exports,(function(e){return i(t[a][1][e]||e)}),u,u.exports,e,t,r,n)}return r[a].exports}for(var o=void 0,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,n){(function(e){"use strict";var r,n,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,a=new i(l),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),r=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var c=new e.MessageChannel;c.port1.onmessage=l,r=function(){c.port2.postMessage(0)}}var u=[];function l(){var e,t;n=!0;for(var r=u.length;r;){for(t=u,u=[],e=-1;++e<r;)t[e]();r=u.length}n=!1}t.exports=function(e){1!==u.push(e)||n||r()}}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,r){"use strict";var n=e(1);function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==i&&d(this,e)}function l(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(e,t,r){n((function(){var n;try{n=t(r)}catch(t){return o.reject(e,t)}n===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,n)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function d(e,t){var r=!1;function n(t){r||(r=!0,o.reject(e,t))}function i(t){r||(r=!0,o.resolve(e,t))}var a=p((function(){t(i,n)}));"error"===a.status&&n(a.value)}function p(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}t.exports=u,u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var r=new this.constructor(i);return this.state!==c?f(r,this.state===s?e:t,this.outcome):this.queue.push(new l(r,e,t)),r},l.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){o.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},o.resolve=function(e,t){var r=p(h,t);if("error"===r.status)return o.reject(e,r.value);var n=r.value;if(n)d(e,n);else{e.state=s,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},u.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},u.reject=function(e){var t=new this(i);return o.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var a=new Array(r),s=0,c=-1,u=new this(i);++c<r;)l(e[c],c);return u;function l(e,i){t.resolve(e).then((function(e){a[i]=e,++s!==r||n||(n=!0,o.resolve(u,a))}),(function(e){n||(n=!0,o.reject(u,e))}))}},u.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r,n=e.length,a=!1;if(!n)return this.resolve([]);for(var s=-1,c=new this(i);++s<n;)r=e[s],t.resolve(r).then((function(e){a||(a=!0,o.resolve(c,e))}),(function(e){a||(a=!0,o.reject(c,e))}));return c}},{1:1}],3:[function(e,t,n){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function o(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var a=Promise;function s(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function c(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function u(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function l(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var f="local-forage-detect-blob-support",h=void 0,d={},p=Object.prototype.toString,y="readonly",v="readwrite";function g(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),i=0;i<t;i++)n[i]=e.charCodeAt(i);return r}function m(e){return"boolean"==typeof h?a.resolve(h):function(e){return new a((function(t){var r=e.transaction(f,v),n=o([""]);r.objectStore(f).put(n,"key"),r.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},r.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}(e).then((function(e){return h=e}))}function b(e){var t=d[e.name],r={};r.promise=new a((function(e,t){r.resolve=e,r.reject=t})),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then((function(){return r.promise})):t.dbReady=r.promise}function w(e){var t=d[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function _(e,t){var r=d[e.name].deferredOperations.pop();if(r)return r.reject(t),r.promise}function k(e,t){return new a((function(r,n){if(d[e.name]=d[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return r(e.db);b(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var a=i.open.apply(i,o);t&&(a.onupgradeneeded=function(t){var r=a.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore(f)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),a.onerror=function(e){e.preventDefault(),n(a.error)},a.onsuccess=function(){r(a.result),w(e)}}))}function x(e){return k(e,!1)}function A(e){return k(e,!0)}function E(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,i=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||r){if(r){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function O(e){return o([g(atob(e.data))],{type:e.type})}function I(e){return e&&e.__local_forage_encoded_blob}function j(e){var t=this,r=t._initReady().then((function(){var e=d[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return c(r,e,e),r}function S(e,t,r,n){void 0===n&&(n=1);try{var i=e.db.transaction(e.storeName,t);r(null,i)}catch(i){if(n>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return a.resolve().then((function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),A(e)})).then((function(){return function(e){b(e);for(var t=d[e.name],r=t.forages,n=0;n<r.length;n++){var i=r[n];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,x(e).then((function(t){return e.db=t,E(e)?A(e):t})).then((function(n){e.db=t.db=n;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=n})).catch((function(t){throw _(e,t),t}))}(e).then((function(){S(e,t,r,n-1)}))})).catch(r);r(i)}}var $={_driver:"asyncStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]=e[n];var i=d[r.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},d[r.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=j);var o=[];function s(){return a.resolve()}for(var c=0;c<i.forages.length;c++){var u=i.forages[c];u!==t&&o.push(u._initReady().catch(s))}var l=i.forages.slice(0);return a.all(o).then((function(){return r.db=i.db,x(r)})).then((function(e){return r.db=e,E(r,t._defaultConfig.version)?A(r):e})).then((function(e){r.db=i.db=e,t._dbInfo=r;for(var n=0;n<l.length;n++){var o=l[n];o!==t&&(o._dbInfo.db=r.db,o._dbInfo.version=r.version)}}))},_support:function(){try{if(!i||!i.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var r=this,n=new a((function(t,n){r.ready().then((function(){S(r._dbInfo,y,(function(i,o){if(i)return n(i);try{var a=o.objectStore(r._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var r=a.result;if(r){var n=r.value;I(n)&&(n=O(n));var i=e(n,r.key,s++);void 0!==i?t(i):r.continue()}else t()},a.onerror=function(){n(a.error)}}catch(e){n(e)}}))})).catch(n)}));return s(n,t),n},getItem:function(e,t){var r=this;e=u(e);var n=new a((function(t,n){r.ready().then((function(){S(r._dbInfo,y,(function(i,o){if(i)return n(i);try{var a=o.objectStore(r._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),I(e)&&(e=O(e)),t(e)},a.onerror=function(){n(a.error)}}catch(e){n(e)}}))})).catch(n)}));return s(n,t),n},setItem:function(e,t,r){var n=this;e=u(e);var i=new a((function(r,i){var o;n.ready().then((function(){return o=n._dbInfo,"[object Blob]"===p.call(t)?m(o.db).then((function(e){return e?t:(r=t,new a((function(e,t){var n=new FileReader;n.onerror=t,n.onloadend=function(t){var n=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:n,type:r.type})},n.readAsBinaryString(r)})));var r})):t})).then((function(t){S(n._dbInfo,v,(function(o,a){if(o)return i(o);try{var s=a.objectStore(n._dbInfo.storeName);null===t&&(t=void 0);var c=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),r(t)},a.onabort=a.onerror=function(){var e=c.error?c.error:c.transaction.error;i(e)}}catch(e){i(e)}}))})).catch(i)}));return s(i,r),i},removeItem:function(e,t){var r=this;e=u(e);var n=new a((function(t,n){r.ready().then((function(){S(r._dbInfo,v,(function(i,o){if(i)return n(i);try{var a=o.objectStore(r._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){n(a.error)},o.onabort=function(){var e=a.error?a.error:a.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return s(n,t),n},clear:function(e){var t=this,r=new a((function(e,r){t.ready().then((function(){S(t._dbInfo,v,(function(n,i){if(n)return r(n);try{var o=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=o.error?o.error:o.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return s(r,e),r},length:function(e){var t=this,r=new a((function(e,r){t.ready().then((function(){S(t._dbInfo,y,(function(n,i){if(n)return r(n);try{var o=i.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){r(o.error)}}catch(e){r(e)}}))})).catch(r)}));return s(r,e),r},key:function(e,t){var r=this,n=new a((function(t,n){e<0?t(null):r.ready().then((function(){S(r._dbInfo,y,(function(i,o){if(i)return n(i);try{var a=o.objectStore(r._dbInfo.storeName),s=!1,c=a.openKeyCursor();c.onsuccess=function(){var r=c.result;r?0===e||s?t(r.key):(s=!0,r.advance(e)):t(null)},c.onerror=function(){n(c.error)}}catch(e){n(e)}}))})).catch(n)}));return s(n,t),n},keys:function(e){var t=this,r=new a((function(e,r){t.ready().then((function(){S(t._dbInfo,y,(function(n,i){if(n)return r(n);try{var o=i.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];o.onsuccess=function(){var t=o.result;t?(a.push(t.key),t.continue()):e(a)},o.onerror=function(){r(o.error)}}catch(e){r(e)}}))})).catch(r)}));return s(r,e),r},dropInstance:function(e,t){t=l.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,o=this;if(e.name){var c=e.name===r.name&&o._dbInfo.db?a.resolve(o._dbInfo.db):x(e).then((function(t){var r=d[e.name],n=r.forages;r.db=t;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=t;return t}));n=e.storeName?c.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var r=t.version+1;b(e);var n=d[e.name],o=n.forages;t.close();for(var s=0;s<o.length;s++){var c=o[s];c._dbInfo.db=null,c._dbInfo.version=r}return new a((function(t,n){var o=i.open(e.name,r);o.onerror=function(e){o.result.close(),n(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<o.length;t++){var r=o[t];r._dbInfo.db=e,w(r._dbInfo)}})).catch((function(t){throw(_(e,t)||a.resolve()).catch((function(){})),t}))}})):c.then((function(t){b(e);var r=d[e.name],n=r.forages;t.close();for(var o=0;o<n.length;o++)n[o]._dbInfo.db=null;return new a((function(t,r){var n=i.deleteDatabase(e.name);n.onerror=n.onblocked=function(e){var t=n.result;t&&t.close(),r(e)},n.onsuccess=function(){var e=n.result;e&&e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<n.length;t++)w(n[t]._dbInfo)})).catch((function(t){throw(_(e,t)||a.resolve()).catch((function(){})),t}))}))}else n=a.reject("Invalid arguments");return s(n,t),n}};var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=/^~~local_forage_type~([^~]+)~/,C="__lfsc__:",D=C.length,M="arbf",L="blob",P="si08",R="ui08",F="uic8",B="si16",z="si32",K="ur16",q="ui32",U="fl32",W="fl64",V=D+M.length,H=Object.prototype.toString;function J(e){var t,r,n,i,o,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),l=new Uint8Array(u);for(t=0;t<s;t+=4)r=T.indexOf(e[t]),n=T.indexOf(e[t+1]),i=T.indexOf(e[t+2]),o=T.indexOf(e[t+3]),l[c++]=r<<2|n>>4,l[c++]=(15&n)<<4|i>>2,l[c++]=(3&i)<<6|63&o;return u}function Y(e){var t,r=new Uint8Array(e),n="";for(t=0;t<r.length;t+=3)n+=T[r[t]>>2],n+=T[(3&r[t])<<4|r[t+1]>>4],n+=T[(15&r[t+1])<<2|r[t+2]>>6],n+=T[63&r[t+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}var Q={serialize:function(e,t){var r="";if(e&&(r=H.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===H.call(e.buffer))){var n,i=C;e instanceof ArrayBuffer?(n=e,i+=M):(n=e.buffer,"[object Int8Array]"===r?i+=P:"[object Uint8Array]"===r?i+=R:"[object Uint8ClampedArray]"===r?i+=F:"[object Int16Array]"===r?i+=B:"[object Uint16Array]"===r?i+=K:"[object Int32Array]"===r?i+=z:"[object Uint32Array]"===r?i+=q:"[object Float32Array]"===r?i+=U:"[object Float64Array]"===r?i+=W:t(new Error("Failed to get type for BinaryArray"))),t(i+Y(n))}else if("[object Blob]"===r){var o=new FileReader;o.onload=function(){var r="~~local_forage_type~"+e.type+"~"+Y(this.result);t("__lfsc__:blob"+r)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(r){console.error("Couldn't convert value into a JSON string: ",e),t(null,r)}},deserialize:function(e){if(e.substring(0,D)!==C)return JSON.parse(e);var t,r=e.substring(V),n=e.substring(D,V);if(n===L&&N.test(r)){var i=r.match(N);t=i[1],r=r.substring(i[0].length)}var a=J(r);switch(n){case M:return a;case L:return o([a],{type:t});case P:return new Int8Array(a);case R:return new Uint8Array(a);case F:return new Uint8ClampedArray(a);case B:return new Int16Array(a);case K:return new Uint16Array(a);case z:return new Int32Array(a);case q:return new Uint32Array(a);case U:return new Float32Array(a);case W:return new Float64Array(a);default:throw new Error("Unkown type: "+n)}},stringToBuffer:J,bufferToString:Y};function G(e,t,r,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function X(e,t,r,n,i,o){e.executeSql(r,n,i,(function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?o(e,a):G(e,t,(function(){e.executeSql(r,n,i,o)}),o)}),o):o(e,a)}),o)}function Z(e,t,r,n){var i=this;e=u(e);var o=new a((function(o,a){i.ready().then((function(){void 0===t&&(t=null);var s=t,c=i._dbInfo;c.serializer.serialize(t,(function(t,u){u?a(u):c.db.transaction((function(r){X(r,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){o(s)}),(function(e,t){a(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(n>0)return void o(Z.apply(i,[e,s,r,n-1]));a(t)}}))}))})).catch(a)}));return s(o,r),o}function ee(e){return new a((function(t,r){e.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(r,n){for(var i=[],o=0;o<n.rows.length;o++)i.push(n.rows.item(o).name);t({db:e,storeNames:i})}),(function(e,t){r(t)}))}),(function(e){r(e)}))}))}var te={_driver:"webSQLStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]="string"!=typeof e[n]?e[n].toString():e[n];var i=new a((function(e,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(e){return n(e)}r.db.transaction((function(i){G(i,r,(function(){t._dbInfo=r,e()}),(function(e,t){n(t)}))}),n)}));return r.serializer=Q,i},_support:"function"==typeof openDatabase,iterate:function(e,t){var r=this,n=new a((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){X(r,i,"SELECT * FROM "+i.storeName,[],(function(r,n){for(var o=n.rows,a=o.length,s=0;s<a;s++){var c=o.item(s),u=c.value;if(u&&(u=i.serializer.deserialize(u)),void 0!==(u=e(u,c.key,s+1)))return void t(u)}t()}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,t),n},getItem:function(e,t){var r=this;e=u(e);var n=new a((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){X(r,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=i.serializer.deserialize(n)),t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,t),n},setItem:function(e,t,r){return Z.apply(this,[e,t,r,1])},removeItem:function(e,t){var r=this;e=u(e);var n=new a((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){X(r,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,t),n},clear:function(e){var t=this,r=new a((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){X(t,n,"DELETE FROM "+n.storeName,[],(function(){e()}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,e),r},length:function(e){var t=this,r=new a((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){X(t,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(t,r){var n=r.rows.item(0).c;e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,e),r},key:function(e,t){var r=this,n=new a((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){X(r,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,r){var n=r.rows.length?r.rows.item(0).key:null;t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,t),n},keys:function(e){var t=this,r=new a((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){X(t,n,"SELECT key FROM "+n.storeName,[],(function(t,r){for(var n=[],i=0;i<r.rows.length;i++)n.push(r.rows.item(i).key);e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,e),r},dropInstance:function(e,t){t=l.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,i=this;return s(n=e.name?new a((function(t){var n;n=e.name===r.name?i._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:n,storeNames:[e.storeName]}):t(ee(n))})).then((function(e){return new a((function(t,r){e.db.transaction((function(n){function i(e){return new a((function(t,r){n.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){r(t)}))}))}for(var o=[],s=0,c=e.storeNames.length;s<c;s++)o.push(i(e.storeNames[s]));a.all(o).then((function(){t()})).catch((function(e){r(e)}))}),(function(e){r(e)}))}))})):a.reject("Invalid arguments"),t),n}};function re(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}function ne(){return!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}()||localStorage.length>0}var ie={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var r in e)t[r]=e[r];return t.keyPrefix=re(e,this._defaultConfig),ne()?(this._dbInfo=t,t.serializer=Q,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var r=this,n=r.ready().then((function(){for(var t=r._dbInfo,n=t.keyPrefix,i=n.length,o=localStorage.length,a=1,s=0;s<o;s++){var c=localStorage.key(s);if(0===c.indexOf(n)){var u=localStorage.getItem(c);if(u&&(u=t.serializer.deserialize(u)),void 0!==(u=e(u,c.substring(i),a++)))return u}}}));return s(n,t),n},getItem:function(e,t){var r=this;e=u(e);var n=r.ready().then((function(){var t=r._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&(n=t.serializer.deserialize(n)),n}));return s(n,t),n},setItem:function(e,t,r){var n=this;e=u(e);var i=n.ready().then((function(){void 0===t&&(t=null);var r=t;return new a((function(i,o){var a=n._dbInfo;a.serializer.serialize(t,(function(t,n){if(n)o(n);else try{localStorage.setItem(a.keyPrefix+e,t),i(r)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||o(e),o(e)}}))}))}));return s(i,r),i},removeItem:function(e,t){var r=this;e=u(e);var n=r.ready().then((function(){var t=r._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return s(n,t),n},clear:function(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(e)&&localStorage.removeItem(n)}}));return s(r,e),r},length:function(e){var t=this.keys().then((function(e){return e.length}));return s(t,e),t},key:function(e,t){var r=this,n=r.ready().then((function(){var t,n=r._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(n.keyPrefix.length)),t}));return s(n,t),n},keys:function(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo,r=localStorage.length,n=[],i=0;i<r;i++){var o=localStorage.key(i);0===o.indexOf(e.keyPrefix)&&n.push(o.substring(e.keyPrefix.length))}return n}));return s(r,e),r},dropInstance:function(e,t){if(t=l.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var n,i=this;return s(n=e.name?new a((function(t){e.storeName?t(re(e,i._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}})):a.reject("Invalid arguments"),t),n}},oe=function(e,t){for(var r=e.length,n=0;n<r;){if((i=e[n])===(o=t)||"number"==typeof i&&"number"==typeof o&&isNaN(i)&&isNaN(o))return!0;n++}var i,o;return!1},ae=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},se={},ce={},ue={INDEXEDDB:$,WEBSQL:te,LOCALSTORAGE:ie},le=[ue.INDEXEDDB._driver,ue.WEBSQL._driver,ue.LOCALSTORAGE._driver],fe=["dropInstance"],he=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(fe),de={description:"",driver:le.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function pe(e,t){e[t]=function(){var r=arguments;return e.ready().then((function(){return e[t].apply(e,r)}))}}function ye(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var r in t)t.hasOwnProperty(r)&&(ae(t[r])?arguments[0][r]=t[r].slice():arguments[0][r]=t[r])}return arguments[0]}var ve=new(function(){function e(t){for(var r in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ue)if(ue.hasOwnProperty(r)){var n=ue[r],i=n._driver;this[r]=i,se[i]||this.defineDriver(n)}this._defaultConfig=ye({},de),this._config=ye({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":n(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,r){var n=new a((function(t,r){try{var n=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void r(i);for(var o=he.concat("_initStorage"),c=0,u=o.length;c<u;c++){var l=o[c];if((!oe(fe,l)||e[l])&&"function"!=typeof e[l])return void r(i)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),r=a.reject(t);return s(r,arguments[arguments.length-1]),r}},r=0,n=fe.length;r<n;r++){var i=fe[r];e[i]||(e[i]=t(i))}}();var f=function(r){se[n]&&console.info("Redefining LocalForage driver: "+n),se[n]=e,ce[n]=r,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(f,r):f(!!e._support):f(!0)}catch(e){r(e)}}));return c(n,t,r),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,r){var n=se[e]?a.resolve(se[e]):a.reject(new Error("Driver not found."));return c(n,t,r),n},e.prototype.getSerializer=function(e){var t=a.resolve(Q);return c(t,e),t},e.prototype.ready=function(e){var t=this,r=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return c(r,e,e),r},e.prototype.setDriver=function(e,t,r){var n=this;ae(e)||(e=[e]);var i=this._getSupportedDrivers(e);function o(){n._config.driver=n.driver()}function s(e){return n._extend(e),o(),n._ready=n._initStorage(n._config),n._ready}var u=null!==this._driverSet?this._driverSet.catch((function(){return a.resolve()})):a.resolve();return this._driverSet=u.then((function(){var e=i[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then((function(e){n._driver=e._driver,o(),n._wrapLibraryMethodsWithReady(),n._initDriver=function(e){return function(){var t=0;return function r(){for(;t<e.length;){var i=e[t];return t++,n._dbInfo=null,n._ready=null,n.getDriver(i).then(s).catch(r)}o();var c=new Error("No available storage method found.");return n._driverSet=a.reject(c),n._driverSet}()}}(i)}))})).catch((function(){o();var e=new Error("No available storage method found.");return n._driverSet=a.reject(e),n._driverSet})),c(this._driverSet,t,r),this._driverSet},e.prototype.supports=function(e){return!!ce[e]},e.prototype._extend=function(e){ye(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=he.length;e<t;e++)pe(this,he[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=ve},{3:3}]},{},[4])(4)},470:(e,t,r)=>{"use strict";var n=r(155);function i(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function o(e,t){for(var r,n="",i=0,o=-1,a=0,s=0;s<=e.length;++s){if(s<e.length)r=e.charCodeAt(s);else{if(47===r)break;r=47}if(47===r){if(o===s-1||1===a);else if(o!==s-1&&2===a){if(n.length<2||2!==i||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var c=n.lastIndexOf("/");if(c!==n.length-1){-1===c?(n="",i=0):i=(n=n.slice(0,c)).length-1-n.lastIndexOf("/"),o=s,a=0;continue}}else if(2===n.length||1===n.length){n="",i=0,o=s,a=0;continue}t&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+="/"+e.slice(o+1,s):n=e.slice(o+1,s),i=s-o-1;o=s,a=0}else 46===r&&-1!==a?++a:a=-1}return n}var a={resolve:function(){for(var e,t="",r=!1,a=arguments.length-1;a>=-1&&!r;a--){var s;a>=0?s=arguments[a]:(void 0===e&&(e=n.cwd()),s=e),i(s),0!==s.length&&(t=s+"/"+t,r=47===s.charCodeAt(0))}return t=o(t,!r),r?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(i(e),0===e.length)return".";var t=47===e.charCodeAt(0),r=47===e.charCodeAt(e.length-1);return 0!==(e=o(e,!t)).length||t||(e="."),e.length>0&&r&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return i(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var r=arguments[t];i(r),r.length>0&&(void 0===e?e=r:e+="/"+r)}return void 0===e?".":a.normalize(e)},relative:function(e,t){if(i(e),i(t),e===t)return"";if((e=a.resolve(e))===(t=a.resolve(t)))return"";for(var r=1;r<e.length&&47===e.charCodeAt(r);++r);for(var n=e.length,o=n-r,s=1;s<t.length&&47===t.charCodeAt(s);++s);for(var c=t.length-s,u=o<c?o:c,l=-1,f=0;f<=u;++f){if(f===u){if(c>u){if(47===t.charCodeAt(s+f))return t.slice(s+f+1);if(0===f)return t.slice(s+f)}else o>u&&(47===e.charCodeAt(r+f)?l=f:0===f&&(l=0));break}var h=e.charCodeAt(r+f);if(h!==t.charCodeAt(s+f))break;47===h&&(l=f)}var d="";for(f=r+l+1;f<=n;++f)f!==n&&47!==e.charCodeAt(f)||(0===d.length?d+="..":d+="/..");return d.length>0?d+t.slice(s+l):(s+=l,47===t.charCodeAt(s)&&++s,t.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(i(e),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,o=!0,a=e.length-1;a>=1;--a)if(47===(t=e.charCodeAt(a))){if(!o){n=a;break}}else o=!1;return-1===n?r?"/":".":r&&1===n?"//":e.slice(0,n)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');i(e);var r,n=0,o=-1,a=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var s=t.length-1,c=-1;for(r=e.length-1;r>=0;--r){var u=e.charCodeAt(r);if(47===u){if(!a){n=r+1;break}}else-1===c&&(a=!1,c=r+1),s>=0&&(u===t.charCodeAt(s)?-1==--s&&(o=r):(s=-1,o=c))}return n===o?o=c:-1===o&&(o=e.length),e.slice(n,o)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!a){n=r+1;break}}else-1===o&&(a=!1,o=r+1);return-1===o?"":e.slice(n,o)},extname:function(e){i(e);for(var t=-1,r=0,n=-1,o=!0,a=0,s=e.length-1;s>=0;--s){var c=e.charCodeAt(s);if(47!==c)-1===n&&(o=!1,n=s+1),46===c?-1===t?t=s:1!==a&&(a=1):-1!==t&&(a=-1);else if(!o){r=s+1;break}}return-1===t||-1===n||0===a||1===a&&t===n-1&&t===r+1?"":e.slice(t,n)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+n:r+"/"+n:n}(0,e)},parse:function(e){i(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var r,n=e.charCodeAt(0),o=47===n;o?(t.root="/",r=1):r=0;for(var a=-1,s=0,c=-1,u=!0,l=e.length-1,f=0;l>=r;--l)if(47!==(n=e.charCodeAt(l)))-1===c&&(u=!1,c=l+1),46===n?-1===a?a=l:1!==f&&(f=1):-1!==a&&(f=-1);else if(!u){s=l+1;break}return-1===a||-1===c||0===f||1===f&&a===c-1&&a===s+1?-1!==c&&(t.base=t.name=0===s&&o?e.slice(1,c):e.slice(s,c)):(0===s&&o?(t.name=e.slice(1,a),t.base=e.slice(1,c)):(t.name=e.slice(s,a),t.base=e.slice(s,c)),t.ext=e.slice(a,c)),s>0?t.dir=e.slice(0,s-1):o&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};a.posix=a,e.exports=a},155:e=>{var t,r,n=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var s,c=[],u=!1,l=-1;function f(){u&&s&&(u=!1,s.length?c=s.concat(c):l=-1,c.length&&h())}function h(){if(!u){var e=a(f);u=!0;for(var t=c.length;t;){for(s=c,c=[];++l<t;)s&&s[l].run();l=-1,t=c.length}s=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new d(e,t)),1!==c.length||u||a(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},889:function(e,t,r){var n=r(155);!function(e,t){"use strict";if(!e.setImmediate){var r,i,o,a,s,c=1,u={},l=!1,f=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?r=function(e){n.nextTick((function(){p(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&p(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){o.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(p,0,e)},h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[c]=i,r(c),c++},h.clearImmediate=d}function d(e){delete u[e]}function p(e){if(l)setTimeout(p,0,e);else{var t=u[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{d(e),l=!1}}}}}("undefined"==typeof self?void 0===r.g?this:r.g:self)},475:function(e,t,r){var n=void 0!==r.g&&r.g||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(889),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==r.g&&r.g.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==r.g&&r.g.clearImmediate||this&&this.clearImmediate}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var n=r(797);window.Nedb=n})();